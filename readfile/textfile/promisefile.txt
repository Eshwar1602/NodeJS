new code with promises

 append complete